# ================================
# Azure App Service設定
# ================================
NODE_ENV=production
PORT=8080

# ヘッダーに表示するアプリケーションタイトル（未設定時: Difyフロントエンドアプリ）
# APP_TITLE=Difyフロントエンドアプリ

# ================================
# Microsoft Entra ID (旧 Azure AD)
# ================================
# Azure Portalから取得したクライアントIDを設定
ENTRA_CLIENT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
ENTRA_CLIENT_SECRET=your-client-secret-here
ENTRA_TENANT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

ENTRA_REDIRECT_URI=https://your-app.azurewebsites.net/auth
ENTRA_POST_LOGOUT_REDIRECT_URI=https://your-app.azurewebsites.net
ENTRA_AUTHORITY=https://login.microsoftonline.com

# ================================
# Microsoft Graph API
# ================================
GRAPH_API_URL=https://graph.microsoft.com/v1.0
GRAPH_API_SCOPE=https://graph.microsoft.com/.default
# 部署グループの表示名にマッチさせる正規表現パターン
# デフォルト: 先頭2文字ZA、3文字目英字、4-6文字目数字、7文字目ハイフン、8文字目英字
# 例: ZAA123-X, ZAB456-Y にマッチ
GRAPH_DEPARTMENT_GROUP_PREFIX=^ZA[A-Za-z]\d{3}-[A-Za-z]

# ================================
# Dify API
# ================================

DIFY_API_URL=http://localhost:8000/v1
DIFY_API_KEY=app-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
DIFY_TIMEOUT=30000
DIFY_MAX_RETRIES=3

# ================================
# セッション管理
# ================================
# 32文字以上のランダムな文字列を生成してください
# 生成方法: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_SECRET=your-session-secret-minimum-32-characters-long
SESSION_MAX_AGE=86400000
SESSION_RESET_HOUR=0
SESSION_STORAGE=memory

# ================================
# Cookie設定
# ================================

COOKIE_DOMAIN=.your-domain.com

COOKIE_SECURE=true
COOKIE_SAME_SITE=lax
COOKIE_HTTP_ONLY=true

# ================================
# ログ設定
# ================================

LOG_LEVEL=info
LOG_DIRECTORY=./logs
LOG_MAX_FILES=30

# ================================
# パフォーマンス設定
# ================================
MAX_MESSAGE_LENGTH=2000
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=30
