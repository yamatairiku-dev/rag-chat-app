# 次の確認項目（IME修正後）

**作成日**: 2025年12月5日  
**現在の状況**: IME変換中のEnterキー問題を修正完了、基本動作確認済み

---

## ✅ 完了した確認項目

- [x] ログインページの表示
- [x] 認証機能（ログイン・ログアウト）
- [x] チャット入力欄の初期高さ（1行）
- [x] 送信ボタンの文字（横書き）
- [x] Enterキーで送信、Shift+Enterで改行
- [x] IME変換中のEnterキーで送信されないように修正

---

## 🎯 次の確認項目（優先順位順）

### 優先度: 高 🔴

#### 1. IME変換とEnterキーの動作確認（10-15分）

**確認項目**:
- [ ] **日本語入力の基本動作**
  - チャット入力欄で日本語を入力できる
  - IME変換候補が表示される
  - 変換確定が正常に動作する

- [ ] **IME変換中のEnterキー**
  - 変換候補が表示されている状態でEnterキーを押す
  - 変換が確定され、メッセージが送信されないことを確認
  - 変換確定直後（200ms以内）にEnterキーを押しても送信されないことを確認
  - 変換確定後、少し待ってからEnterキーを押すとメッセージが送信されることを確認

- [ ] **通常のEnterキー送信**
  - 変換確定後、通常のEnterキーでメッセージが送信されることを確認
  - 英語入力時、Enterキーでメッセージが送信されることを確認

- [ ] **Shift+Enterで改行**
  - Shift+Enterキーで改行が追加されることを確認
  - 複数行のメッセージを送信できることを確認

**確認方法**:
1. チャット入力欄で日本語を入力
2. 変換候補が表示されている状態でEnterキーを押して変換を確定
3. 変換確定直後にEnterキーを押しても送信されないことを確認
4. 少し待ってからEnterキーを押すとメッセージが送信されることを確認
5. Shift+Enterで改行が追加されることを確認

**テストケース**:
- ケース1: 「こんにちは」と入力 → 変換確定 → Enter → 送信される ✅
- ケース2: 「こんにちは」と入力 → 変換候補表示中 → Enter → 変換確定のみ、送信されない ✅
- ケース3: 「こんにちは」と入力 → 変換確定直後（200ms以内） → Enter → 送信されない ✅
- ケース4: 「Hello」と入力 → Enter → 送信される ✅
- ケース5: 「こんにちは」と入力 → Shift+Enter → 改行が追加される ✅

---

#### 2. チャット入力欄の自動リサイズ確認（5-10分）

**確認項目**:
- [ ] **初期表示**
  - チャット入力欄の初期高さが1行（2.5rem）であることを確認
  - 送信ボタンの高さが1行（2.5rem）であることを確認

- [ ] **自動リサイズ**
  - 短いテキストを入力しても高さが変わらないことを確認
  - 長いテキストを入力すると高さが自動的に増えることを確認
  - 最大高さ（200px）を超えないことを確認
  - 改行を追加すると高さが増えることを確認

- [ ] **メッセージ送信後のリセット**
  - メッセージを送信後、入力欄の高さが1行に戻ることを確認
  - 複数行のメッセージを送信後も、入力欄の高さが1行に戻ることを確認

**確認方法**:
1. チャット入力欄の初期高さを確認
2. 短いテキストを入力して高さが変わらないことを確認
3. 長いテキストを入力して高さが自動的に増えることを確認
4. 改行を追加して高さが増えることを確認
5. メッセージを送信して高さが1行に戻ることを確認

**テストケース**:
- ケース1: 初期表示 → 1行の高さ ✅
- ケース2: 短いテキスト入力 → 高さが変わらない ✅
- ケース3: 長いテキスト入力 → 高さが自動的に増える ✅
- ケース4: 改行追加 → 高さが増える ✅
- ケース5: メッセージ送信後 → 高さが1行に戻る ✅

---

#### 3. エッジケースの動作確認（10-15分）

**確認項目**:
- [ ] **空メッセージの送信**
  - 空のメッセージを送信しようとしても送信されないことを確認
  - 空白のみのメッセージも送信されないことを確認

- [ ] **連続送信**
  - メッセージを送信後、すぐに次のメッセージを送信できることを確認
  - ストリーミング中にメッセージを送信しようとしても送信されないことを確認
  - エラーメッセージが適切に表示されることを確認

- [ ] **特殊文字の入力**
  - 絵文字（😀、🎉など）を入力して送信できることを確認
  - 特殊記号（@、#、$など）を入力して送信できることを確認
  - 改行を含むメッセージを送信できることを確認

- [ ] **長文メッセージ**
  - 非常に長いメッセージ（1000文字以上）を入力して送信できることを確認
  - 長文メッセージでも自動リサイズが正常に動作することを確認

- [ ] **コピー&ペースト**
  - 他のアプリケーションからテキストをコピーして貼り付けできることを確認
  - 複数行のテキストを貼り付けできることを確認
  - 貼り付け後、自動リサイズが正常に動作することを確認

**確認方法**:
1. 空のメッセージを送信しようとしても送信されないことを確認
2. メッセージを送信後、すぐに次のメッセージを送信できることを確認
3. ストリーミング中にメッセージを送信しようとしても送信されないことを確認
4. 特殊文字や絵文字を入力して送信できることを確認
5. 長文メッセージを入力して送信できることを確認
6. コピー&ペーストが正常に動作することを確認

---

### 優先度: 中 🟡

#### 4. クロスブラウザテスト（15-20分）

**確認項目**:
- [ ] **Chrome/Edge**
  - IME変換中のEnterキーが正常に動作することを確認
  - チャット入力欄の自動リサイズが正常に動作することを確認
  - すべての基本機能が正常に動作することを確認

- [ ] **Firefox**（可能な場合）
  - IME変換中のEnterキーが正常に動作することを確認
  - チャット入力欄の自動リサイズが正常に動作することを確認
  - すべての基本機能が正常に動作することを確認

- [ ] **Safari**（可能な場合）
  - IME変換中のEnterキーが正常に動作することを確認
  - チャット入力欄の自動リサイズが正常に動作することを確認
  - すべての基本機能が正常に動作することを確認

**確認方法**:
1. 異なるブラウザでアプリケーションにアクセス
2. IME変換中のEnterキーの動作を確認
3. チャット入力欄の自動リサイズを確認
4. すべての基本機能が正常に動作することを確認

---

#### 5. レスポンシブデザインの確認（10-15分）

**確認項目**:
- [ ] **モバイルサイズ（375px）**
  - チャット入力欄が適切に表示されることを確認
  - 送信ボタンが適切に表示されることを確認
  - 自動リサイズが正常に動作することを確認
  - IME変換中のEnterキーが正常に動作することを確認

- [ ] **タブレットサイズ（768px）**
  - チャット入力欄が適切に表示されることを確認
  - 送信ボタンが適切に表示されることを確認
  - 自動リサイズが正常に動作することを確認

- [ ] **デスクトップサイズ（1920px）**
  - チャット入力欄が適切に表示されることを確認
  - 送信ボタンが適切に表示されることを確認
  - 自動リサイズが正常に動作することを確認

**確認方法**:
1. ブラウザの開発者ツール（F12）を開く
2. デバイスモードを有効化
3. 異なる画面サイズで表示を確認
4. 各サイズでIME変換と自動リサイズを確認

---

#### 6. パフォーマンスの確認（10-15分）

**確認項目**:
- [ ] **初回ロード時間**
  - ブラウザの開発者ツール（F12）を開く
  - Networkタブを開く
  - ページをリロード（Ctrl+R / Cmd+R）
  - 初回ロード時間を確認（目標: 3秒以内）

- [ ] **APIレスポンスタイム**
  - NetworkタブでAPIリクエストを確認
  - `/api/chat-stream`のレスポンスタイムを確認（目標: 2秒以内）

- [ ] **メモリ使用量**
  - Performanceタブを開く
  - 「Record」ボタンをクリック
  - 数回メッセージを送信
  - 「Stop」ボタンをクリック
  - メモリリークがないことを確認

- [ ] **入力欄のパフォーマンス**
  - 長文を入力しても入力がスムーズであることを確認
  - 自動リサイズがスムーズに動作することを確認
  - 連続送信してもパフォーマンスが低下しないことを確認

**確認方法**:
1. ブラウザの開発者ツール（F12）を開く
2. NetworkタブとPerformanceタブでパフォーマンスを確認
3. 長文を入力してパフォーマンスを確認

---

### 優先度: 低 🟢

#### 7. アクセシビリティの確認（10-15分）

**確認項目**:
- [ ] **キーボード操作**
  - Tabキーでフォーカスが移動することを確認
  - Enterキーでメッセージを送信できることを確認
  - Shift+Enterで改行が追加されることを確認
  - キーボード操作で全機能が使用できることを確認

- [ ] **スクリーンリーダー**（可能な場合）
  - チャット入力欄が適切に読み上げられることを確認
  - 送信ボタンが適切に読み上げられることを確認
  - エラーメッセージが適切に読み上げられることを確認

- [ ] **ARIA属性**
  - ブラウザの開発者ツールでARIA属性を確認
  - 適切なARIA属性が設定されていることを確認

**確認方法**:
1. キーボード操作でアクセシビリティを確認
2. スクリーンリーダーで読み上げを確認（可能な場合）
3. 開発者ツールでARIA属性を確認

---

#### 8. E2Eテストの実行（5-10分）

**確認項目**:
- [ ] **E2Eテストの実行**
  - `npm run test:e2e`を実行
  - すべてのE2Eテストが成功することを確認

**確認方法**:
```bash
npm run test:e2e
```

---

## 📋 確認結果の記録テンプレート

確認が完了したら、以下を記録してください：

```markdown
## 動作確認結果（IME修正後）

**確認日**: YYYY-MM-DD
**確認者**: [名前]
**環境**: 開発環境

### IME変換とEnterキー
- [x] 日本語入力: ✅
- [x] IME変換中のEnterキー: ✅
- [x] 通常のEnterキー送信: ✅
- [x] Shift+Enterで改行: ✅

### チャット入力欄の自動リサイズ
- [x] 初期表示（1行）: ✅
- [x] 自動リサイズ: ✅
- [x] メッセージ送信後のリセット: ✅

### エッジケース
- [x] 空メッセージの送信: ✅
- [x] 連続送信: ✅
- [x] 特殊文字の入力: ✅
- [x] 長文メッセージ: ✅
- [x] コピー&ペースト: ✅

### クロスブラウザテスト
- [x] Chrome/Edge: ✅
- [x] Firefox: ⚠️ / ✅
- [x] Safari: ⚠️ / ✅

### レスポンシブデザイン
- [x] モバイルサイズ: ✅
- [x] タブレットサイズ: ✅
- [x] デスクトップサイズ: ✅

### パフォーマンス
- 初回ロード時間: [秒]
- APIレスポンスタイム: [秒]
- メモリ使用量: [MB]

### 問題点
（問題があれば記載）

### 次のアクション
（必要に応じて記載）
```

---

## 🚀 推奨される確認順序

1. **IME変換とEnterキーの動作確認**（最優先）
2. **チャット入力欄の自動リサイズ確認**
3. **エッジケースの動作確認**
4. **クロスブラウザテスト**
5. **レスポンシブデザインの確認**
6. **パフォーマンスの確認**
7. **アクセシビリティの確認**
8. **E2Eテストの実行**

---

## 📝 関連ドキュメント

- [開発環境動作確認手順](./docs/16_開発環境動作確認手順.md)
- [動作確認ガイド](./動作確認ガイド.md)
- [トラブルシューティング](./docs/13_トラブルシューティング.md)
- [次の確認項目](./次の確認項目.md)

---

**最終更新**: 2025年12月5日


