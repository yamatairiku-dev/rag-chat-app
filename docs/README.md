# 社内RAG検索チャットボット - 仕様書

## プロジェクト概要

社内規則や業務マニュアルをRAG（Retrieval-Augmented Generation）検索できる業務支援チャットボットの開発

### 主要機能
- 社内規則・マニュアルの自然言語検索
- ストリーミング形式のチャット応答
- チャット履歴とユーザーアクションのログ保存（利用状況分析用）
- ユーザーIDと所属コードの記録（統計・分析用）

### 対象ユーザー
社内従業員

---

## ドキュメント構成

この仕様書は、開発効率を最大化するために関心事ごとに分割されています。

### 設計・仕様
1. **[技術スタック](./01_技術スタック.md)** - 採用技術の詳細と選定理由
2. **[環境変数設定](./02_環境変数設定.md)** - 環境変数とバリデーション
3. **[API仕様](./03_API仕様.md)** - Dify API仕様の詳細
4. **[認証設計](./04_認証設計.md)** - Microsoft Entra ID認証とGraph API連携
5. **[Graph API取得情報](./Graph_API取得情報.md)** - Graph APIで取得するデータと利用先の整理
6. **[セッション管理](./05_セッション管理.md)** - セッション管理の実装
7. **[エラーハンドリング](./06_エラーハンドリング.md)** - エラー処理とロギング
8. **[型定義](./07_型定義.md)** - TypeScript型定義

### 実装ガイド
9. **[Phase 1: 認証基盤](./08_実装ガイド_Phase1.md)** - Entra ID認証とGraph API連携
10. **[Phase 2: チャット機能](./09_実装ガイド_Phase2.md)** - Dify API連携とチャット機能
11. **[Phase 3: UI/UX改善](./10_実装ガイド_Phase3.md)** - shadcn/uiを活用したUI実装
12. **[Phase 4: 機能拡張](./11_実装ガイド_Phase4.md)** - 履歴機能とテスト実装

### チェックリスト・ドキュメント
13. **[実装チェックリスト](./12_チェックリスト.md)** - 実装確認項目と注意事項
14. **[トラブルシューティング](./13_トラブルシューティング.md)** - よくある問題と解決方法
15. **[コンポーネントドキュメント](./14_コンポーネントドキュメント.md)** - Reactコンポーネントの仕様と使用方法

---

## 開発の進め方

### 推奨読み順

**初回開発開始時:**
1. README.md（本ファイル）
2. 01_技術スタック.md
3. 02_環境変数設定.md
4. 08_実装ガイド_Phase1.md

**各Phase開発時:**
- Phase 1: 08_実装ガイド_Phase1.md + 04_認証設計.md + 05_セッション管理.md
- Phase 2: 09_実装ガイド_Phase2.md + 03_API仕様.md + 07_型定義.md
- Phase 3: 10_実装ガイド_Phase3.md
- Phase 4: 11_実装ガイド_Phase4.md

**実装中の参照:**
- エラー処理: 06_エラーハンドリング.md
- 型定義: 07_型定義.md
- チェック: 12_チェックリスト.md

---

## クイックスタート

### 1. 環境セットアップ

```bash
# リポジトリクローン
git clone <repository-url>
cd rag-chat-app

# 依存関係インストール
npm install

# 環境変数設定
cp .env.example .env
# .envファイルを編集（02_環境変数設定.md参照）
```

### 2. Microsoft Entra ID設定

詳細は **[04_認証設計.md](./04_認証設計.md)** を参照

1. Azure Portalでアプリ登録
2. APIパーミッション設定
3. クライアントシークレット生成
4. リダイレクトURI設定

### 3. 開発開始

```bash
# 開発サーバー起動
npm run dev

# 別ターミナルでTypeScriptコンパイル監視
npm run typecheck:watch
```

---

## プロジェクト全体の開発スケジュール

| Phase | 内容 | 所要時間 | ドキュメント |
|-------|------|----------|--------------|
| Phase 1 | 認証基盤（Entra ID + Graph API） | 8-12時間 | 08_実装ガイド_Phase1.md |
| Phase 2 | チャット機能（Dify API連携） | 6-8時間 | 09_実装ガイド_Phase2.md |
| Phase 3 | UI/UX改善（shadcn/ui） | 4-6時間 | 10_実装ガイド_Phase3.md |
| Phase 4 | 機能拡張（履歴・テスト） | 8-12時間 | 11_実装ガイド_Phase4.md |
| **合計** | | **26-38時間** | |

---

## React 19 + Node.js 24の利点

このプロジェクトで最新スタック（React 19 + Node.js 24 LTS）を採用する理由：

### React 19の利点
- **Actions API**: フォーム処理の簡素化
- **ref as prop**: forwardRefが不要
- **Document Metadata**: React Helmetが不要
- **useOptimistic**: 楽観的UI更新が簡単
- **React Compiler（今後）**: 手動最適化が不要に

### Node.js 24の利点
- **LTSサポート**: 2028年4月まで保証
- **V8 13.6エンジン**: 最新のJavaScript機能
- **npm 11**: パフォーマンスとセキュリティ強化

詳細は **[01_技術スタック.md](./01_技術スタック.md)** を参照

---

## サポート

- **技術的な質問**: 各ドキュメントの「よくある質問」セクションを参照
- **実装の進め方**: 12_チェックリスト.mdを確認
- **エラー対応**: 06_エラーハンドリング.mdを参照

---

**最終更新**: 2025年11月

このドキュメントは、プロジェクトの進行に応じて随時更新してください。
